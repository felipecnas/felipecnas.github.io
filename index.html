<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thiago & Larissa</title> <!-- Título Atualizado -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Nunito+Sans:wght@300;400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Tela de Loading (Preloader) -->
    <div id="preloader" class="preloader">
        <div class="preloader-content">
            <!-- Opção 1: Spinner Simples -->
            <!-- <div class="spinner"></div> -->

            <!-- Opção 2: Logo do Casal (se tiver um logo pequeno) -->
             <img src="images/logo-casal.png" alt="Carregando..." class="preloader-logo">

            <!-- Opção 3: Ícone de Coração Pulsante -->
            <!-- <i class="fas fa-heart preloader-icon"></i> -->
        </div>
    </div>

    <!-- Fixed Top Navigation Menu -->
    <nav class="top-nav">
        <ul>
            <li><a href="#details">Detalhes</a></li>
            <li><a href="#story">História</a></li>
            <li class="logo-item">
                <a href="#home">
                    <img src="images/logo-casal.png" alt="Logo Thiago & Larissa" class="nav-logo">
                </a>
            </li>
            <li><a href="#gifts">Presentes</a></li>
            <li><a href="#rsvp">RSVP</a></li>
        </ul>
    </nav>

    <!-- Hero Section com Vídeo de Fundo -->
    <header class="hero-section" id="home">
        <!-- Vídeo de Fundo -->
        <video class="hero-video" autoplay muted loop playsinline poster="images/hero-fallback.jpg">
            <source src="videos/hero-background.webm" type="video/webm">
            <source src="videos/hero-background.mp4" type="video/mp4">
            Seu navegador não suporta vídeos HTML5.
        </video>

        <!-- Conteúdo sobreposto -->
        <div class="hero-content" data-aos="fade-in" data-aos-duration="4000">
            <h1>Thiago & Larissa</h1>
            <p class="hero-date"><strong>25 DE MAIO DE 2025</strong></p>
            <!-- Cronômetro regressivo -->
            <div class="countdown-container">
                <div id="countdown" class="countdown"></div>
            </div>
        </div>
    </header>

    <!-- Event Details Section -->
    <section class="details-section" id="details">
        <div class="container">
            <h2 data-aos="fade-up" data-aos-duration="2400">Detalhes do Evento</h2>
            <div class="details-grid">
                <!-- Local Item -->
                <div class="detail-item" data-aos="fade-up" data-aos-delay="100" data-aos-duration="2400">
                    <i class="fas fa-map-marker-alt detail-icon"></i>
                    <h3>Local</h3>
                    <p><strong>Condomínio Village Japará</strong></p> <!-- Endereço Atualizado -->
                    <p>Rod Ilhéus - Itacaré, Km 9 </p> <!-- Endereço Atualizado -->
                    <a href="https://maps.app.goo.gl/aKY7et4jg7fAA1HJ9" target="_blank" class="map-link">Ver no Mapa</a> <!-- Link Atualizado -->
                </div>

                <!-- Horário Item -->
                <div class="detail-item" data-aos="fade-up" data-aos-delay="200" data-aos-duration="2400">
                    <i class="fas fa-clock detail-icon"></i>
                    <h3>Horário</h3>
                    <p>A cerimônia terá início às</p>
                    <p><strong>07h00</strong></p>
                    <p><em>Chegue antes para se acomodar!</em></p> <!-- Texto Atualizado -->
                </div>

                <!-- Traje Item -->
                <div class="detail-item" data-aos="fade-up" data-aos-delay="300" data-aos-duration="2400">
                    <i class="fas fa-user-tie detail-icon"></i>
                    <h3>Traje</h3>
                    <p><strong>Esporte Fino</strong></p>
                    <p><em>Queremos que se sintam confortáveis e elegantes para celebrar conosco.</em></p>
                </div>

                <!-- Cronograma Item (Novo) -->
                <div class="detail-item detail-item-schedule" data-aos="fade-up" data-aos-delay="400" data-aos-duration="2400">
                    <i class="fas fa-calendar-alt detail-icon"></i>
                    <h3>Agenda</h3> <!-- Título Atualizado -->
                    <div class="schedule-list">
                        <div class="schedule-item">
                            <span class="schedule-time">06h30</span>
                            <span class="schedule-event">Recepção</span>
                        </div>
                        <div class="schedule-item">
                            <span class="schedule-time">07h00</span>
                            <span class="schedule-event">Cerimônia</span>
                        </div>
                        <div class="schedule-item">
                            <span class="schedule-time">08h30</span>
                            <span class="schedule-event">Brunch (café da manhã)</span>
                        </div>
                        <div class="schedule-item">
                            <span class="schedule-time">09h30</span>
                            <span class="schedule-event">Encerramento</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Parallax Divider 1 -->
    <div class="parallax-divider parallax-1"></div>

    <!-- Our Story Section - Versão com texto expandível -->
    <section class="story-section" id="story">
        <div class="container">
            <h2 data-aos="fade-up" data-aos-duration="2400">Nossa História</h2>
            <div class="story-content" data-aos="fade-up" data-aos-delay="200" data-aos-duration="2400">
                <img src="images/couple-story.jpg" alt="Nossa História" class="story-image" data-aos="zoom-in" data-aos-delay="300" data-aos-duration="2400">

                <div class="story-text-container">
                    <!-- Versão resumida (sempre visível) -->
                    <div class="story-preview">
                        <p>
                            A história de Thiago e Larissa começou há muitos anos atrás, no entanto o amor desses dois não surgiu de repente, e sim floresceu de uma linda amizade de anos.
                        </p>
                    </div>

                    <!-- Versão completa (inicialmente oculta) -->
                    <div class="story-full" id="story-full">
                        <p>
                            Em julho de 2020, Larissa começou sua amizade com Lívian, mas até então ela não imaginava que ela seria o canal para essa linda história de amor acontecer.
                        </p>
                        <p>
                            Foi aí que então no auge da pandemia, elas se reuniam para cozinhar e passar tempo juntas, quando de repente Thiago começa a responder suas postagens e assim eles começam a ficar mais próximos. Nos meses seguintes Thiago chama Larissa no Instagram e pergunta o que iriam fazer, pois sentimentos estavam nascendo nos corações de ambos, Daí então eles começaram a orar pedindo a Deus direção e clareza sobre o que estavam sentindo.
                        </p>
                        <p>
                            E depois de longos meses de orações e algumas reviravoltas. Na comemoração do aniversário de 18 anos de Larissa, no dia 24/04/2021, eles perceberam que Deus já tinha respondido as suas orações através do amor que sentiam em seu coração, e que a cada dia só aumentava. Foi então que deram o seu primeiro Beijo, e foi como se todo aquele tempo de espera tivesse válido a pena.
                        </p>
                        <p>
                            E no dia 23/05/2021 eles oficializaram o seu namoro para seus pais e líder espiritual, e desde então, não se desgrudaram mais, não havia ausência de tempestades, mas sempre estavam em paz, pois Deus estava e está no "barco"!
                        </p>
                        <p>
                            Passaram-se exatos 2 anos 11 meses e 27 dias quando Thiago decidiu dar um passo a frente e assumir um noivado com Larissa, e novamente, mas não por coincidência, pois ele já tinha orquestrado tudo, na celebração do seu 21° aniversário Thiago colocou uma aliança em seu dedo e anunciou que no próximo ano se casariam. Mas Larissa não acreditava que realmente se casaria em 2025, pois ao seu ver as coisas estavam acontecendo rápido demais, mas mal sabiam eles que Deus estava no controle de tudo e que esse casamento já tinha data e horário.
                        </p>
                        <p>
                            Foi exatamente no dia 20/10/2024 quando Larissa disse o seu definitivo "SIM" para Thiago, em um ato de amor e fé, afirmando q se casariam em maio do próximo ano. E assim sucedeu que em fevereiro/2025 deram entrada com os documentos no cartório e definiram a data para se casarem apenas no civil, pois aos olhos naturais não era possível terem o tão sonhado casamento que queriam.
                        </p>
                        <p>
                            Mas em apenas duas semanas após marcarem a data do casamento, todas as peças começaram a se encaixar, e assim como diz em Deuteronômio 28, que as bençãos seguirão aqueles que obedecem a voz de Deus, assim foi o processo para preparar o casamento, Deus abriu as comportas dos céus e derramou chuvas de bençãos sobre suas vidas, bençãos tais quais não podiam imaginar.
                        </p>
                        <p>
                            Mas na palavra de Deus diz, que o que ninguém sabe e nem sequer pode sonhar ou imaginar, é o que Ele tem reservado para nós. Por isso creiam que Deus é o mesmo e ainda faz milagres, somente creiam de todo coração e testemunhem os milagres que Deus tem operado na vida desse casal!
                        </p>
                    </div>

                    <!-- Botão para expandir/recolher -->
                    <button id="story-toggle" class="story-toggle">
                        <span class="toggle-text-expand">Ler história completa</span>
                        <span class="toggle-text-collapse">Recolher</span>
                        <i class="fas fa-chevron-down toggle-icon-expand"></i>
                        <i class="fas fa-chevron-up toggle-icon-collapse"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Parallax Divider 2 -->
    <div class="parallax-divider parallax-2"></div>

    <!-- Gift Registry Section -->
    <section class="gifts-section" id="gifts">
        <div class="container">
            <h2 data-aos="fade-up" data-aos-duration="2400">Lista de Presentes</h2>
            <p data-aos="fade-up" data-aos-delay="100" data-aos-duration="2400">
                Sua presença é o nosso maior presente! Mas, se desejar nos presentear, ficaremos muito felizes. Criamos duas listas de presentes ou, se preferir, disponibilizamos uma opção de contribuição via PIX para nossa lua de mel.
            </p>
            <div class="gift-links" data-aos="fade-up" data-aos-delay="200" data-aos-duration="2400">
                <a href="https://www.finalfeliz.de/thirissa" target="_blank" class="cta-button">Magazine Luiza</a> <!-- Link Atualizado -->
                <a href="https://listas.casasbahia.com.br/thirissa2025" target="_blank" class="cta-button">Casas Bahia</a> <!-- Link Atualizado -->
                <button id="pix-button" class="cta-button">Presentear via PIX</button>
            </div>

            <!-- Toast de confirmação para cópia do PIX -->
            <div id="pix-toast" class="pix-toast">
                <div class="toast-content">
                    <i class="fas fa-check-circle"></i>
                    <span>Chave PIX copiada com sucesso!</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção do Versículo Bíblico - Versão com Texto Fixo Centralizado -->
    <section class="verse-section" id="verse">
        <div class="verse-parallax">
            <div class="verse-container" data-aos="fade-in" data-aos-duration="3000">
                <div class="verse-content">
                    <p class="verse-text">"Foi o SENHOR que fez isto, e é coisa maravilhosa aos nossos olhos"</p>
                    <p class="verse-reference">SALMOS 118:23</p>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section class="rsvp-section" id="rsvp">
        <div class="container">
            <h2 data-aos="fade-up" data-aos-duration="2400">Confirme sua Presença</h2>
            <p data-aos="fade-up" data-aos-delay="100" data-aos-duration="2400">Por favor, confirme sua presença até <strong>25 de Abril de 2025</strong> para nos ajudar na organização.</p>

            <!-- Formulário atualizado para Google Apps Script -->
            <div id="form-container" class="form-container" data-aos="fade-up" data-aos-delay="200" data-aos-duration="2400">
                <form id="rsvp-form" action="https://script.google.com/macros/s/AKfycbwpmIUpKzc84KjusP1uG1l8zkVPDULrIDVtgVbHBvpPGlgVU246T_vuS7idbTjXHTGX0g/exec" class="rsvp-form"> <!-- URL Atualizada -->
                    <!-- Campo oculto para personalizar o assunto do email (NÃO USADO PELO APPS SCRIPT, mas pode deixar) -->
                    <input type="hidden" name="_subject" value="Nova confirmação de presença - Casamento Thiago & Larissa">

                    <div class="form-group">
                        <label for="name">Nome Completo:</label>
                        <input type="text" id="name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="whatsapp">Número do WhatsApp:</label>
                        <input type="tel" id="whatsapp" name="whatsapp" placeholder="(XX) XXXXX-XXXX" required>
                    </div>

                    <div class="form-group">
                        <label for="guests">Número de Convidados (incluindo você):</label>
                        <input type="number" id="guests" name="guests" min="1" value="1" required>
                    </div>

                    <div class="form-group radio-group">
                        <p>Você(s) irá(ão) comparecer?</p>
                        <label>
                            <input type="radio" name="attendance" value="Sim" required> Sim, com certeza!
                        </label>
                        <label>
                            <input type="radio" name="attendance" value="Não"> Infelizmente, não poderei ir.
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="message">Deixe uma mensagem para os noivos (opcional):</label>
                        <textarea id="message" name="message" rows="4"></textarea>
                    </div>

                    <!-- Campo anti-spam (NÃO USADO PELO APPS SCRIPT, mas pode deixar) -->
                    <input type="text" name="_gotcha" style="display:none">

                    <button type="submit" class="cta-button">Enviar Confirmação</button>
                </form>

                <!-- Mensagem de confirmação para quem vai comparecer (inicialmente oculta) -->
                <div id="confirmation-yes" class="confirmation-message">
                    <div class="confirmation-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3>Obrigado pela sua confirmação!</h3>
                    <p>Estamos muito felizes que você estará presente no nosso grande dia!</p>
                    <p>Mal podemos esperar para celebrar este momento especial com você.</p>
                    <p class="confirmation-details">Caso precise alterar alguma informação, entre em contato conosco.</p>
                </div>

                <!-- Mensagem de confirmação para quem não vai comparecer (inicialmente oculta) -->
                <div id="confirmation-no" class="confirmation-message">
                    <div class="confirmation-icon">
                        <i class="fas fa-heart-broken"></i>
                    </div>
                    <h3>Recebemos sua resposta</h3>
                    <p>Sentiremos sua falta no nosso grande dia, mas entendemos que nem sempre é possível comparecer.</p>
                    <p>Obrigado por nos informar e esperamos encontrá-lo em outra oportunidade!</p>
                    <p class="confirmation-details">Caso seus planos mudem, entre em contato conosco.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer-section">
        <p>&copy; 2025 Thiago & Larissa. Feito com ❤️.</p>
    </footer>

    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 2400, // Dobrado para animações mais lentas (era 1200ms)
            once: true
        });
    </script>

    <!-- Smooth Scroll JS - Versão melhorada -->
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    // Obter a altura exata da navbar
                    const navHeight = document.querySelector('.top-nav').offsetHeight;

                    // Obter a posição do elemento alvo
                    const elementPosition = targetElement.getBoundingClientRect().top;

                    // Calcular a posição de deslocamento considerando a posição atual de rolagem e a altura da navbar
                    const offsetPosition = elementPosition + window.pageYOffset - navHeight;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });
    </script>

    <!-- Script para máscara de telefone com limite de 11 dígitos -->
    <script>
        document.getElementById('whatsapp').addEventListener('input', function (e) {
            let value = e.target.value;

            // Remove todos os caracteres não numéricos
            value = value.replace(/\D/g, '');

            // Limita a 11 dígitos (DDD + 9 dígitos)
            if (value.length > 11) {
                value = value.slice(0, 11);
            }

            // Aplica a máscara conforme o usuário digita
            if (value.length <= 2) {
                // Apenas DDD
                value = value.replace(/^(\d{0,2})/, '($1');
            } else if (value.length <= 7) {
                // DDD + primeiros dígitos
                value = value.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
            } else {
                // Formato completo
                value = value.replace(/^(\d{2})(\d{5})(\d{0,4})/, '($1) $2-$3');
            }

            // Atualiza o valor do campo
            e.target.value = value;
        });
    </script>

    <!-- Script para envio do formulário com AJAX e exibição da mensagem de confirmação personalizada (VERSÃO CORRIGIDA PARA GOOGLE APPS SCRIPT) -->
    <script>
        document.getElementById('rsvp-form').addEventListener('submit', function(e) {
            e.preventDefault(); // Impede o envio padrão do formulário

            const form = this;
            const formData = new FormData(form);
            const submitButton = form.querySelector('button[type="submit"]');
            const formElement = document.getElementById('rsvp-form');
            const confirmationYes = document.getElementById('confirmation-yes');
            const confirmationNo = document.getElementById('confirmation-no');

            // Verifica qual opção foi selecionada ANTES de desabilitar o botão
            const attendanceInput = form.querySelector('input[name="attendance"]:checked');
            // Define 'willAttend' como false se nenhum botão de rádio for selecionado (embora 'required' deva prevenir isso)
            const willAttend = attendanceInput ? attendanceInput.value === "Sim" : false;

            // --- Feedback Visual: Iniciar Carregamento ---
            submitButton.disabled = true; // Desabilita o botão durante o envio
            // Cria o spinner dinamicamente para evitar duplicação se o usuário clicar rápido
            const spinner = document.createElement('span');
            spinner.className = 'loading-spinner';
            submitButton.appendChild(spinner); // Adiciona o spinner ao botão
            submitButton.classList.add('loading');
            // --- Fim Feedback Visual ---

            console.log("Enviando para:", form.action); // Log para depuração

            fetch(form.action, { // Usa a URL do Apps Script definida no action do form
                method: 'POST', // Método POST é necessário para o doPost do Apps Script
                body: formData
                // 'mode: no-cors' NÃO deve ser usado aqui, pois impede a leitura da resposta.
                // O Apps Script implantado para "Qualquer pessoa" lida com CORS para POST.
            })
            .then(response => {
                console.log("Status da Resposta Bruta:", response.status); // Log para depuração
                console.log("Resposta Bruta OK:", response.ok); // Log para depuração
                // Tenta analisar como JSON independentemente do status ok, pois o Apps Script pode retornar erros no corpo
                return response.json().catch(err => {
                    // Se a análise JSON falhar, lança um erro indicando resposta inválida
                    console.error("Falha ao analisar JSON da resposta:", err);
                    throw new Error(`Resposta inválida do servidor (Status: ${response.status})`);
                });
            })
            .then(data => {
                console.log("Dados da Resposta Analisada:", data); // Log para depuração

                // Verifica explicitamente o campo 'result' na resposta JSON do Apps Script
                if (data && data.result === "success") {
                    console.log("Sucesso detectado, mostrando confirmação."); // Log para depuração

                    // Esconde o formulário com animação
                    formElement.classList.add('hide');

                    // Pequeno atraso para a animação de transição 'hide' completar
                    setTimeout(() => {
                        // Mostra a mensagem de confirmação apropriada
                        if (willAttend) {
                            confirmationYes.classList.add('show');
                        } else {
                            confirmationNo.classList.add('show');
                        }
                    }, 600); // Ajuste este tempo se a duração da transição CSS for diferente

                    // Opcional: Limpar o formulário após o sucesso
                    // form.reset();
                } else {
                    // Se o Apps Script retornou um JSON, mas não indicou sucesso
                    console.error("Falha na submissão segundo o Apps Script:", data); // Log para depuração
                    throw new Error(data.error || 'Ocorreu um erro ao processar sua confirmação.');
                }
            })
            .catch(error => {
                console.error('Erro no Fetch ou Processamento:', error); // Log detalhado do erro
                // Alerta o usuário sobre o erro
                alert(`Erro ao enviar confirmação: ${error.message}. Por favor, tente novamente ou entre em contato conosco.`);
            })
            .finally(() => {
                // --- Feedback Visual: Parar Carregamento ---
                // Garante que o botão seja reativado e o spinner removido, independentemente do resultado
                submitButton.disabled = false; // Reabilita o botão
                const existingSpinner = submitButton.querySelector('.loading-spinner');
                if (existingSpinner) {
                    submitButton.removeChild(existingSpinner); // Remove apenas o span do spinner
                }
                submitButton.classList.remove('loading');
                 // --- Fim Feedback Visual ---
            });
        });
    </script>

    <!-- Script para efeito de texto fixo centralizado na seção do versículo - Versão aprimorada -->
    <script>
        window.addEventListener('scroll', function() {
            const verseSection = document.querySelector('.verse-section');
            const verseParallax = document.querySelector('.verse-parallax');
            const giftsSection = document.querySelector('.gifts-section');
            const rsvpSection = document.querySelector('.rsvp-section');

            if (verseSection && verseParallax && giftsSection && rsvpSection) {
                // Obtém a altura da navbar
                const navHeight = document.querySelector('.top-nav').offsetHeight;

                // Obtém as posições e dimensões dos elementos
                const verseSectionRect = verseSection.getBoundingClientRect();
                const giftsSectionRect = giftsSection.getBoundingClientRect();
                const rsvpSectionRect = rsvpSection.getBoundingClientRect();

                // Calcula a posição de 30% de saída da tela para a seção de presentes
                const triggerPosition = window.innerHeight * 0.4;

                // Verifica se a seção de presentes está com 30% ou menos de sua altura visível na parte inferior da tela
                const isGiftsSectionTriggered = giftsSectionRect.bottom <= triggerPosition;

                // Verifica se a seção RSVP está começando a entrar na tela
                const isRsvpVisible = rsvpSectionRect.top < window.innerHeight;

                // Ajusta a posição do elemento fixo para compensar a navbar
                verseParallax.style.top = navHeight + 'px';
                verseParallax.style.height = `calc(100vh - ${navHeight}px)`;

                if (isGiftsSectionTriggered) {
                    // Torna o texto visível gradualmente conforme a seção de presentes sai da tela
                    // Calcula o progresso baseado em quão abaixo do trigger a seção de presentes está
                    const scrollProgress = Math.max(0, 1 - (giftsSectionRect.bottom / triggerPosition));
                    const baseOpacity = Math.min(scrollProgress * 1.5, 1); // Aumenta a velocidade do fade-in

                    // Se a seção RSVP estiver entrando na tela, começa a esconder o texto
                    if (isRsvpVisible) {
                        // Calcula quanto da seção RSVP está visível (0 a 1)
                        const rsvpVisiblePercentage = Math.max(0, (window.innerHeight - rsvpSectionRect.top) / window.innerHeight);
                        // Diminui a opacidade conforme a seção RSVP entra na tela (multiplicador maior para fade-out mais rápido)
                        verseParallax.style.opacity = Math.max(0, baseOpacity - (rsvpVisiblePercentage * 1.5));
                    } else {
                        // Mantém a opacidade baseada na saída da seção de presentes
                        verseParallax.style.opacity = baseOpacity;
                    }
                } else {
                    // Esconde o texto se a seção de presentes ainda não atingiu o ponto de gatilho
                    verseParallax.style.opacity = '0';
                }
            }
        });
    </script>

    <!-- Script para copiar chave PIX para a área de transferência -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pixButton = document.getElementById('pix-button');
            const pixToast = document.getElementById('pix-toast');

            // Substitua este valor pela chave PIX real
            const pixKey = "thiago150601@gmail.com"; // Chave PIX Atualizada

            pixButton.addEventListener('click', function() {
                copyToClipboard(pixKey);

                // Adiciona classe para feedback visual
                this.classList.add('clicked');

                // Remove a classe após 1.7 segundos
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 1700);
            });

            function copyToClipboard(text) {
                // Método moderno com Clipboard API (funciona em navegadores modernos)
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text)
                        .then(() => showToast())
                        .catch(err => {
                            console.error('Erro ao copiar: ', err);
                            // Fallback para o método alternativo
                            fallbackCopyToClipboard(text);
                        });
                } else {
                    // Método alternativo para navegadores que não suportam Clipboard API
                    fallbackCopyToClipboard(text);
                }
            }

            function fallbackCopyToClipboard(text) {
                // Cria um elemento de texto temporário
                const textArea = document.createElement("textarea");
                textArea.value = text;

                // Torna o textarea invisível
                textArea.style.position = "fixed";
                textArea.style.top = "0";
                textArea.style.left = "0";
                textArea.style.width = "2em";
                textArea.style.height = "2em";
                textArea.style.padding = "0";
                textArea.style.border = "none";
                textArea.style.outline = "none";
                textArea.style.boxShadow = "none";
                textArea.style.background = "transparent";

                document.body.appendChild(textArea);

                // Funcionalidade específica para iOS
                if (navigator.userAgent.match(/ipad|iphone/i)) {
                    // Cria um range e seleciona o texto
                    const range = document.createRange();
                    range.selectNodeContents(textArea);
                    const selection = window.getSelection();
                    selection.removeAllRanges();
                    selection.addRange(range);
                    textArea.setSelectionRange(0, 9999);
                } else {
                    // Para outros dispositivos
                    textArea.select();
                }

                try {
                    // Executa o comando de cópia
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showToast();
                    } else {
                        console.error('Falha ao copiar o texto');
                    }
                } catch (err) {
                    console.error('Erro ao tentar copiar', err);
                }

                // Remove o elemento temporário
                document.body.removeChild(textArea);
            }

            function showToast() {
                // Mostra o toast de confirmação
                pixToast.classList.add('show');

                // Remove o toast após 3 segundos
                setTimeout(() => {
                    pixToast.classList.remove('show');
                }, 3000);
            }
        });
    </script>

    <!-- Script para expandir/recolher a história -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const storyToggle = document.getElementById('story-toggle');
            const storyFull = document.getElementById('story-full');

            if (storyToggle && storyFull) {
                storyToggle.addEventListener('click', function() {
                    // Alterna a classe expanded no texto completo
                    storyFull.classList.toggle('expanded');

                    // Alterna a classe expanded no botão
                    this.classList.toggle('expanded');

                    // Scroll suave para o início da seção se estiver recolhendo
                    if (!storyFull.classList.contains('expanded')) {
                        const storySection = document.getElementById('story');
                        if (storySection) {
                            const navHeight = document.querySelector('.top-nav').offsetHeight;
                            const sectionTop = storySection.getBoundingClientRect().top + window.pageYOffset - navHeight;

                            window.scrollTo({
                                top: sectionTop,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            }
        });
    </script>

    <!-- Script para o cronômetro regressivo -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Data e hora do casamento: 25 de Maio de 2025 às 07:00 (horário de Brasília)
            const weddingDate = new Date('2025-05-25T07:00:00-03:00');

            // Função para atualizar o cronômetro
            function updateCountdown() {
                const now = new Date();
                const difference = weddingDate - now;

                // Se a data já passou, mostra uma mensagem especial
                if (difference < 0) {
                    document.getElementById('countdown').innerHTML = 'Nosso grande dia chegou!';
                    return;
                }

                // Cálculo dos dias, horas, minutos e segundos restantes
                const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((difference % (1000 * 60)) / 1000);

                // Formatação dos números (adiciona zero à esquerda para números menores que 10)
                const formattedHours = hours < 10 ? '0' + hours : hours;
                const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
                const formattedSeconds = seconds < 10 ? '0' + seconds : seconds;

                // Texto para o cronômetro com pluralização correta
                const daysText = days === 1 ? 'dia' : 'dias';
                const hoursText = hours === 1 ? 'hora' : 'horas';
                const minutesText = minutes === 1 ? 'minuto' : 'minutos';
                const secondsText = seconds === 1 ? 'segundo' : 'segundos';

                // Atualiza o HTML do cronômetro
                document.getElementById('countdown').innerHTML =
                    `Faltam ${days} ${daysText}, ${formattedHours} ${hoursText}, ${formattedMinutes} ${minutesText} e ${formattedSeconds} ${secondsText}`;
            }

            // Atualiza o cronômetro imediatamente
            updateCountdown();

            // Atualiza o cronômetro a cada segundo
            setInterval(updateCountdown, 1000);
        });
    </script>

    <!-- Script para esconder o Preloader -->
    <script>
        window.addEventListener('load', function() {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                // Adiciona um pequeno atraso opcional para garantir que tudo renderize
                setTimeout(() => {
                    preloader.classList.add('loaded');
                }, 500); // Atraso de 500ms (meio segundo) - ajuste se necessário
            }
        });
    </script>

</body>
</html>